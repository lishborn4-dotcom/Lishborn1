<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lishborn - AI Insult Generator</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Load Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            background-color: #101010;
        }
        @keyframes bounce-slow {
            0%, 100% { transform: scale(1.25) translateY(0); }
            50% { transform: scale(1.25) translateY(-5px); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 3s infinite;
        }
        .input-cursor {
            caret-color: #ef4444;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ส่วนประกอบของ AI จำลอง (Template AI) ---
        const SUBJECTS = ["กกต.", "ระบบเลือกตั้ง", "คนนับคะแนน", "งบประมาณ", "ความโปร่งใส", "เครื่องคิดเลข", "บัตรเลือกตั้ง"];
        const VERBS = ["หายไปไหนหมด", "ทำงานเหมือนเต่า", "แดกงบไปเท่าไหร่", "คำนวณมั่วซั่ว", "พังพินาศ", "ส้นตีนมาก", "ห่วยแตก", "ไร้ประสิทธิภาพ"];
        const ENDINGS = ["ครับพี่น้อง", "ให้ตายเถอะ", "ไม่อายฟ้าดิน", "จริงๆ นะจ๊ะ", "เอาสมองส่วนไหนคิด", "ควยยย", "ไอ้เวร"];

        // --- คำด่าตั้งต้น ---
        const INITIAL_RESPONSES = [
            "ออกแบบให้แย่ยังไงก็ได้เพราะยังไงก็ไม่แย่กว่าแม่มแล้ว",
            "ระบบล่มเก่งกว่าระบบทำงานอีกครับ",
            "งบประมาณพันล้าน ได้งานหลักร้อย",
            "บัตรเขย่งหรือคนเขย่งครับเนี่ย",
            "ขอเครื่องคิดเลขใหม่ไหมครับ?",
            "Loading 99%... (ค้างมา 4 ปีแล้ว)",
            "Error 404: Transparency Not Found",
            "ต้องใช้ AI ช่วยทำงาน หรือต้องใช้คนมี I ทำงานครับ?",
            "กกต.หน้าหี", "กกต.หัวควย", "ไอเหี้ย กกต.", "กกต.ส้นตีน", "กกต.จัญไร"
        ];

        const PixelGhost = () => (
            <svg width="64" height="64" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" className="text-red-500">
                <path d="M4 2H10V3H11V4H12V9H11V10H10V11H9V10H8V9H6V10H5V11H4V10H3V9H2V4H3V3H4V2Z" fill="currentColor"/>
                <rect x="4" y="5" width="2" height="2" fill="black"/>
                <rect x="8" y="5" width="2" height="2" fill="black"/>
                <rect x="4" y="6" width="1" height="1" fill="white"/>
                <rect x="8" y="6" width="1" height="1" fill="white"/>
            </svg>
        );

        function App() {
            const [displayedText, setDisplayedText] = useState("");
            const [isTyping, setIsTyping] = useState(false);
            const [cursorVisible, setCursorVisible] = useState(true);
            
            // โหมดเพิ่มคำด่าเอง
            const [inputMode, setInputMode] = useState(false);
            const [customInput, setCustomInput] = useState("");
            const [allResponses, setAllResponses] = useState(INITIAL_RESPONSES);
            const inputRef = useRef(null);

            // ฟังก์ชัน AI ผสมคำ (Creative Mode)
            const generateCreativeInsult = () => {
                const subj = SUBJECTS[Math.floor(Math.random() * SUBJECTS.length)];
                const verb = VERBS[Math.floor(Math.random() * VERBS.length)];
                const end = ENDINGS[Math.floor(Math.random() * ENDINGS.length)];
                // 30% ที่จะเติมคำลงท้าย
                return Math.random() > 0.3 ? `${subj} ${verb} ${end}` : `${subj} ${verb}`;
            };
            
            const generateNewInsult = () => {
                if (isTyping || inputMode) return;
                
                setIsTyping(true);
                setDisplayedText("");
                
                // สุ่มว่าจะเอาคำตายตัว หรือ ให้ AI ผสมคำใหม่ (50/50)
                let targetText;
                if (Math.random() > 0.5) {
                    // โหมดดึงจากคลัง (รวมที่userพิมพ์เพิ่ม)
                    const randomIndex = Math.floor(Math.random() * allResponses.length);
                    targetText = allResponses[randomIndex];
                } else {
                    // โหมด AI ผสมคำใหม่
                    targetText = generateCreativeInsult();
                }
                
                let charIndex = 0;
                const typingInterval = setInterval(() => {
                    if (charIndex < targetText.length) {
                        setDisplayedText((prev) => prev + targetText.charAt(charIndex));
                        charIndex++;
                    } else {
                        clearInterval(typingInterval);
                        setIsTyping(false);
                    }
                }, 40);
            };

            const handleAddCustomInsult = (e) => {
                e.preventDefault();
                if (customInput.trim()) {
                    setAllResponses(prev => [...prev, customInput]);
                    setDisplayedText(`> เพิ่มคำด่า: "${customInput}" เข้าสู่ระบบแล้ว`);
                    setCustomInput("");
                    setInputMode(false);
                }
            };

            useEffect(() => {
                const interval = setInterval(() => setCursorVisible(v => !v), 530);
                return () => clearInterval(interval);
            }, []);

            useEffect(() => {
                generateNewInsult();
            }, []);

            useEffect(() => {
                if (inputMode && inputRef.current) {
                    inputRef.current.focus();
                }
            }, [inputMode]);

            return (
                <div className="min-h-screen text-gray-300 flex items-center justify-center p-4 selection:bg-gray-700 selection:text-white"
                     onClick={!inputMode ? generateNewInsult : undefined}>
                    <div className="w-full max-w-2xl">
                        
                        {/* Main Red Box */}
                        <div className={`relative border rounded-xl pt-16 pb-12 px-8 flex flex-col items-center justify-center gap-6 bg-[#101010] transition-colors duration-300 ${inputMode ? 'border-yellow-500/60' : 'border-red-500/40 hover:border-red-500/60 cursor-pointer'}`}>
                            
                            <div className="absolute -top-3 left-8 px-2 bg-[#101010]">
                                <span className={`${inputMode ? 'text-yellow-500' : 'text-red-400/80'} text-sm tracking-wide transition-colors`}>
                                    {inputMode ? 'Lishborn : Input Mode' : 'Lishborn'}
                                </span>
                            </div>

                            <h1 className="text-xl text-gray-200 font-bold tracking-tight">
                                {inputMode ? 'Enter Custom Data' : 'Welcome back'}
                            </h1>

                            <div className="transform scale-125 my-2 animate-bounce-slow">
                                <PixelGhost />
                            </div>

                            <div className="text-center space-y-1">
                                <p className="text-gray-400 font-medium">Opus 4.5</p>
                                <p className="text-gray-500 text-sm">
                                    {inputMode ? 'Waiting for user input...' : 'API Usage Billing'}
                                </p>
                            </div>
                        </div>

                        {/* Terminal Input Area */}
                        <div className="mt-10 px-2 space-y-3">
                            <div className="text-gray-500 text-sm mb-4">Welcome to Lishborn System</div>
                            <div className="h-px w-full bg-gray-800 mb-4"></div>

                            {/* Command Line */}
                            <div className="flex items-center gap-3 text-lg">
                                <span className={`${inputMode ? 'text-yellow-500' : 'text-gray-500'} font-bold`}>❯</span>
                                <span className="text-gray-200">
                                    {inputMode ? 'เพิ่มข้อมูลลงฐานระบบ:' : 'สร้างระบบด่ากกต.อัตโนมัติ'}
                                </span>
                            </div>

                            {/* Output / Input Area */}
                            <div className="text-lg text-gray-400 pl-6 relative min-h-[30px]">
                                {inputMode ? (
                                    <form onSubmit={handleAddCustomInsult} className="flex items-center">
                                        <input 
                                            ref={inputRef}
                                            type="text" 
                                            className="bg-transparent border-none outline-none text-yellow-100 w-full placeholder-gray-600 input-cursor"
                                            placeholder="พิมพ์คำด่าที่นี่ แล้วกด Enter..."
                                            value={customInput}
                                            onChange={(e) => setCustomInput(e.target.value)}
                                            onBlur={() => { if(!customInput) setInputMode(false); }}
                                        />
                                    </form>
                                ) : (
                                    <>
                                        <span className={`inline-block w-2.5 h-6 bg-gray-400 align-middle mr-1 transition-opacity ${cursorVisible || isTyping ? 'opacity-100' : 'opacity-0'}`}></span>
                                        <span>{displayedText}</span>
                                    </>
                                )}
                            </div>
                        </div>

                        {/* Footer Controls */}
                        <div className="mt-16 px-2 flex flex-col items-center gap-4 text-xs font-medium opacity-70">
                            
                            {/* ปุ่มสำหรับเปิดโหมดเพิ่มคำ */}
                            <button 
                                onClick={(e) => { e.stopPropagation(); setInputMode(true); }}
                                className="px-4 py-2 border border-gray-700 rounded hover:bg-gray-800 hover:text-white transition-colors text-cyan-600/80"
                            >
                                [ + เพิ่มคำด่าด้วยตัวเอง ]
                            </button>

                            <div className="flex items-center gap-2 text-cyan-600/60">
                                <span>❚❚</span>
                                <span>(Click box to randomize) • AI Creative Mode Active</span>
                            </div>
                        </div>

                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
