<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบด่า กกต. </title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;800&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Kanit', sans-serif;
            overflow: hidden;
            margin: 0;
        }

        #starfield {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
        }

        .glass-panel {
            background: rgba(10, 15, 30, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(100, 200, 255, 0.15);
            box-shadow: 0 0 50px rgba(0, 150, 255, 0.1);
        }

        .neon-text {
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 200, 255, 0.8), 0 0 20px rgba(0, 200, 255, 0.4);
        }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(0, 200, 255, 0.3); border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: rgba(0, 200, 255, 0.6); }
        
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <canvas id="starfield"></canvas>
    <div id="root" class="relative z-10 w-full h-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- DATABASE ---
        const PRESET_PHRASES = [
            "7 เสือ เหมือน 7 เหี้ย", "4 ปีทำงานใหญ่แค่ครั้งเดียวยังบกพร่อง", "ไม่โปร่งใส ตรวจสอบไม่ได้",
            "กกต. = โกงการเลือกตั้ง", "อยากเอา กกต. ไปซักว่ะ สกปรกเกิน", "งบประมาณพันล้าน ได้งานหลักร้อย",
            "บัตรเขย่งหรือคนเขย่งครับเนี่ย", "ขอเครื่องคิดเลขใหม่ไหมครับ?", "Loading 99%... (ค้างมา 4 ปีแล้ว)",
            "ต้องใช้ AI ช่วยทำงาน หรือต้องใช้คนมี I ทำงานครับ?"
        ];
        const SUBJECTS = ["กกต.", "7 เสือ", "คณะกรรมการฯ", "คนจัดเลือกตั้ง", "ระบบรายงานผล", "งบ 6 พันล้าน", "บัตรเลือกตั้ง", "ความโปร่งใส", "คนนับคะแนน", "เครื่องคิดเลข", "เซิร์ฟเวอร์", "ผู้มีอำนาจ", "ตรรกะพวกคุณ", "การทำงานของท่าน", "ระเบียบการเลือกตั้ง", "บัตรเขย่ง", "ผลคะแนน", "สมองคนคิด", "ภาษีประชาชน", "ความรับผิดชอบ", "เลขาฯ กกต.", "งบดูงานต่างประเทศ", "ผู้ใหญ่ในบ้านเมือง", "ระบบไอที", "คนคุมกฎ"];
        const VERBS = ["หายไปไหนหมด", "ทำงานเหมือนเต่า", "แดกงบไปเท่าไหร่", "คำนวณมั่วซั่ว", "พังพินาศ", "หมาไม่แดก", "ล่มเก่งเหลือเกิน", "พักผ่อนอยู่เหรอ", "ดูงานเมืองนอก", "ไร้ประสิทธิภาพ", "หน้าด้านจริงๆ", "ทำอะไรกันอยู่", "โกงหน้าด้านๆ", "ปัดความรับผิดชอบ", "คิดเลขไม่เป็น", "ซ่อนคะแนน", "หน่วงความเจริญ", "ถ่วงเวลา", "ไม่เห็นหัวประชาชน", "ทำงานชุ่ยๆ", "ลาออกเถอะ", "กลับไปนอน", "ดองเรื่องเก่ง", "ทำงานเอาหน้า"];
        const OBJECTS = ["ครับท่าน", "จนน่าเกลียด", "แบบงงๆ", "ยับเยิน", "ชิบหายวายปวง", "จนกูงง", "ไม่อายฟ้าดิน", "ให้เด็กอนุบาลทำยังดีกว่า", "เสียดายภาษี", "น่าสมเพช", "เละเทะไปหมด", "ทุเรศลูกตา", "เกินเยียวยา", "แบบไร้ยางอาย", "เห็นแล้วท้อ", "มืดมนอนธการ", "ต่ำตม", "หาความเจริญไม่เจอ", "เน่าเฟะ", "อัปยศอดสู", "รกสภา", "หนักแผ่นดิน", "เสียเวลาเปล่า", "ไม่คุ้มค่าข้าว"];
        const ENDINGS = ["ไอ้สัส", "ไอ้เวร", "ควยยย", "ถุย", "ลาออกไปเถอะ", "ถามจริ๊ง?", "เลิกตอแหลได้แล้ว", "เอาตีนคิดเหรอ", "จริงๆ นะจ๊ะ", "ส้นตีนมาก", "เหนื่อยใจว่ะ", "ขอร้องล่ะ", "จบนะ", "อย่าแถ", "จำใส่สมองไว้", "ประชาชนดูอยู่", "บาปกรรมมีจริง", "อายหมามันบ้าง", "ไอ้หน้าไม่อาย", "สาสสส", "ไปตายซะ", "สำเหนียกบ้าง", "กระจอกแท้"];

        // --- ICONS ---
        const RocketIcon = () => (<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>);
        const StopIcon = () => (<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="6" y="6" width="12" height="12" rx="2" ry="2"/></svg>);
        const SaveIcon = () => (<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>);
        const CancelIcon = () => (<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>);
        const CopyIcon = () => (<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>);

        const StarfieldBackground = ({ speed }) => {
            useEffect(() => {
                const canvas = document.getElementById('starfield');
                const ctx = canvas.getContext('2d');
                let width, height;
                let stars = [];
                const resize = () => {
                    width = window.innerWidth; height = window.innerHeight;
                    canvas.width = width; canvas.height = height;
                    stars = [];
                    for(let i=0; i<200; i++) stars.push({x: Math.random()*width-width/2, y: Math.random()*height-height/2, z: Math.random()*width});
                };
                window.addEventListener('resize', resize); resize();
                let animationFrameId;
                const render = () => {
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.3)'; ctx.fillRect(0, 0, width, height);
                    const cx = width / 2; const cy = height / 2;
                    for(let i=0; i<stars.length; i++) {
                        let star = stars[i]; star.z -= speed;
                        if (star.z <= 0) { star.z = width; star.x = Math.random()*width-width/2; star.y = Math.random()*height-height/2; }
                        const x = (star.x/star.z)*width + cx; const y = (star.y/star.z)*height + cy;
                        const size = (1 - star.z/width)*4; const alpha = (1 - star.z/width);
                        ctx.fillStyle = `rgba(200, 240, 255, ${alpha})`;
                        ctx.beginPath(); ctx.arc(x, y, size > 0 ? size : 0, 0, Math.PI * 2); ctx.fill();
                        if(speed > 15) {
                            const prevX = (star.x/(star.z+speed*2))*width + cx; const prevY = (star.y/(star.z+speed*2))*height + cy;
                            ctx.strokeStyle = `rgba(100, 200, 255, ${alpha * 0.5})`; ctx.lineWidth = size;
                            ctx.beginPath(); ctx.moveTo(prevX, prevY); ctx.lineTo(x, y); ctx.stroke();
                        }
                    }
                    animationFrameId = requestAnimationFrame(render);
                };
                render();
                return () => { window.removeEventListener('resize', resize); cancelAnimationFrame(animationFrameId); };
            }, [speed]);
            return null;
        };

        function App() {
            const [displayText, setDisplayText] = useState("ระบบพร้อมทำงาน");
            const [warpSpeed, setWarpSpeed] = useState(2);
            const [isTyping, setIsTyping] = useState(false);
            const [autoLoop, setAutoLoop] = useState(false);
            const [history, setHistory] = useState([]);
            const [inputMode, setInputMode] = useState(false);
            const [customInput, setCustomInput] = useState("");
            const [customPhrases, setCustomPhrases] = useState([]);
            const [insultCount, setInsultCount] = useState(0);
            
            const typingRef = useRef(null);
            const autoLoopRef = useRef(null);
            const historyRef = useRef([]);

            const generateText = () => {
                let text = "";
                let attempts = 0;
                while(attempts < 15) {
                    const rand = Math.random();
                    if (customPhrases.length > 0 && rand < 0.3) {
                        text = customPhrases[Math.floor(Math.random() * customPhrases.length)];
                    } else if (rand < 0.5) { 
                        text = PRESET_PHRASES[Math.floor(Math.random() * PRESET_PHRASES.length)];
                    } else { 
                        const s = SUBJECTS[Math.floor(Math.random() * SUBJECTS.length)];
                        const v = VERBS[Math.floor(Math.random() * VERBS.length)];
                        const o = OBJECTS[Math.floor(Math.random() * OBJECTS.length)];
                        const e = Math.random() > 0.5 ? " " + ENDINGS[Math.floor(Math.random() * ENDINGS.length)] : "";
                        text = `${s} ${v} ${o}${e}`;
                    }
                    if (!historyRef.current.includes(text)) { break; }
                    attempts++;
                }
                return text;
            };

            const triggerAction = () => {
                if (inputMode) return;
                setWarpSpeed(40); setIsTyping(true); setDisplayText("");
                const targetText = generateText();
                let i = 0;
                if (typingRef.current) clearInterval(typingRef.current);
                typingRef.current = setInterval(() => {
                    setDisplayText(prev => targetText.substring(0, i + 1)); i++;
                    if (i > targetText.length) {
                        clearInterval(typingRef.current); setIsTyping(false); setWarpSpeed(autoLoop ? 20 : 2);
                        const timestamp = new Date().toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit', second: '2-digit'});
                        const newItem = { text: targetText, time: timestamp };
                        setHistory(prev => [newItem, ...prev].slice(0, 100)); 
                        historyRef.current = [targetText, ...historyRef.current].slice(0, 20); 
                        setInsultCount(prev => prev + 1);
                        if (autoLoopRef.current && !inputMode) { setTimeout(() => { if (autoLoopRef.current) triggerAction(); }, 1500); }
                    }
                }, 20);
            };

            const toggleAutoLoop = (e) => {
                e.stopPropagation();
                const newState = !autoLoop;
                setAutoLoop(newState); autoLoopRef.current = newState;
                if (newState) { setWarpSpeed(20); triggerAction(); } else { setWarpSpeed(2); }
            };

            const handleAddCustom = (e) => {
                e.preventDefault();
                if(customInput.trim()) {
                    setCustomPhrases(prev => [...prev, customInput]);
                    setDisplayText(`บันทึก: "${customInput}" เรียบร้อย!`);
                    setCustomInput("");
                    setInputMode(false); 
                    const timestamp = new Date().toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit', second: '2-digit'});
                    setHistory(prev => [{ text: `[SYSTEM] เพิ่มคำด่าใหม่เข้าระบบ`, time: timestamp }, ...prev]);
                }
            };

            const copyText = (text) => {
                navigator.clipboard.writeText(text);
                alert("คัดลอกแล้ว!");
            };

            const handleTextClick = (e) => {
                if(!isTyping && displayText && !inputMode) {
                    e.stopPropagation(); copyText(displayText);
                }
            };

            const AudioBars = () => (
                <div className="flex gap-1 items-end h-8">
                    {[...Array(8)].map((_, i) => (
                        <div key={i} className="w-1 bg-cyan-400/80 rounded-t" style={{ height: isTyping || autoLoop ? `${Math.random() * 100}%` : '10%', transition: 'height 0.1s ease' }}></div>
                    ))}
                </div>
            );

            useEffect(() => { setTimeout(() => triggerAction(), 1000); }, []);

            return (
                <div className="flex flex-col items-center justify-center w-full h-full p-4 relative" onClick={() => !inputMode && !isTyping && triggerAction()}>
                    <StarfieldBackground speed={warpSpeed} />
                    <div className="glass-panel w-full max-w-3xl rounded-3xl p-5 md:p-8 relative overflow-hidden z-20 flex flex-col items-center border-t border-cyan-500/30 h-[90vh]">
                        
                        <div className="w-full flex justify-between items-center mb-4 border-b border-cyan-500/20 pb-4 flex-shrink-0">
                            <div>
                                <h1 className="text-3xl md:text-4xl font-black italic tracking-tighter text-white font-['Rajdhani'] neon-text">LISHBORN</h1>
                                <p className="text-xs text-cyan-400 font-['Kanit'] tracking-[0.2em] mt-1">OPUS 4.5 ระบบด่าหมา</p>
                            </div>
                            <div className="text-right">
                                <div className="text-[10px] text-cyan-600 font-mono">INSULT COUNT</div>
                                <div className="text-xl font-bold font-mono text-white neon-text">{insultCount.toString().padStart(4, '0')}</div>
                            </div>
                        </div>

                        <div className="w-full min-h-[140px] flex items-center justify-center text-center relative mb-4 flex-shrink-0 bg-black/20 rounded-xl border border-white/5 p-4 cursor-pointer hover:bg-white/5 transition-colors" onClick={handleTextClick}>
                            {inputMode ? (
                                <form onSubmit={handleAddCustom} className="w-full" onClick={(e) => e.stopPropagation()}>
                                    <input autoFocus type="text" className="w-full bg-transparent border-b-2 border-cyan-500 text-center text-xl md:text-3xl py-2 outline-none text-white font-['Kanit'] placeholder-cyan-800 transition-all focus:border-white" placeholder="พิมพ์คำด่าที่นี่..." value={customInput} onChange={(e) => setCustomInput(e.target.value)} />
                                </form>
                            ) : (
                                <h2 className={`text-2xl md:text-4xl font-bold leading-tight break-words font-['Kanit'] transition-all duration-300 ${isTyping ? 'scale-95 blur-[0.5px] opacity-80' : 'scale-100 blur-0 opacity-100 neon-text'}`}>
                                    {displayText}
                                </h2>
                            )}
                        </div>

                        {/* --- CONTROLS AREA (แก้บั๊กปุ่มทับกัน) --- */}
                        <div className="w-full grid grid-cols-2 gap-3 mb-6 flex-shrink-0">
                            {inputMode ? (
                                <>
                                    <button onClick={handleAddCustom} className="py-3 bg-green-600 border border-green-400 rounded-xl text-white font-['Kanit'] font-bold text-lg uppercase tracking-wide shadow-[0_0_15px_rgba(0,255,0,0.4)] flex items-center justify-center gap-2 whitespace-nowrap hover:scale-105 transition-transform">
                                        <SaveIcon /> บันทึก
                                    </button>
                                    <button onClick={(e) => { e.stopPropagation(); setInputMode(false); setCustomInput(""); }} className="py-3 bg-red-900/50 border border-red-500 rounded-xl text-red-300 font-['Kanit'] font-bold text-lg uppercase tracking-wide flex items-center justify-center gap-2 whitespace-nowrap hover:scale-105 transition-transform">
                                        <CancelIcon /> ยกเลิก
                                    </button>
                                </>
                            ) : (
                                <>
                                    <button onClick={(e) => { e.stopPropagation(); setInputMode(true); setAutoLoop(false); setWarpSpeed(2); }} className="py-3 bg-cyan-950/40 border border-cyan-500/30 rounded-xl text-cyan-300 hover:bg-cyan-500 hover:text-black hover:border-cyan-400 transition-colors font-['Kanit'] font-bold text-sm md:text-base uppercase tracking-wide shadow-[0_0_15px_rgba(0,200,255,0.1)] whitespace-nowrap">
                                        + เพิ่มคำด่า
                                    </button>
                                    
                                    {/* แยกปุ่มตามเงื่อนไข (Conditional Rendering) เพื่อแก้บั๊ก Text Overlap */}
                                    {autoLoop ? (
                                        <button onClick={toggleAutoLoop} className="py-3 border rounded-xl font-['Kanit'] font-bold text-sm md:text-base uppercase tracking-wide bg-red-500/20 border-red-500 text-red-200 shadow-[0_0_25px_rgba(255,50,50,0.4)] animate-pulse whitespace-nowrap flex items-center justify-center gap-2">
                                            <StopIcon /> หยุดระบบ
                                        </button>
                                    ) : (
                                        <button onClick={toggleAutoLoop} className="py-3 border rounded-xl font-['Kanit'] font-bold text-sm md:text-base uppercase tracking-wide bg-cyan-950/40 border-cyan-500/30 text-cyan-300 hover:bg-cyan-500 hover:text-black hover:border-cyan-400 transition-colors whitespace-nowrap flex items-center justify-center gap-2">
                                            <RocketIcon /> เริ่มด่ารัวๆ
                                        </button>
                                    )}
                                </>
                            )}
                        </div>

                        <div className="w-full flex-1 flex flex-col min-h-0 border-t border-white/10 pt-4 relative">
                            <div className="flex justify-between items-center mb-2 px-2">
                                <span className="text-xs text-cyan-500 font-['Rajdhani'] font-bold tracking-widest uppercase flex items-center gap-2"><span className="w-2 h-2 bg-cyan-500 rounded-full animate-pulse"></span>LIVE HISTORY LOG</span>
                                <span className="text-[10px] text-gray-500">SCROLL FOR MORE</span>
                            </div>
                            <div className="flex-1 overflow-y-auto custom-scroll pr-2 space-y-2 pb-2">
                                {history.length === 0 ? <div className="text-center text-gray-600 text-sm font-['Kanit'] mt-10">รอข้อมูล...</div> : history.map((item, idx) => (
                                    <div key={idx} className="bg-black/30 border border-white/5 rounded-lg p-3 flex justify-between items-start gap-3 hover:bg-white/5 transition-colors fade-in group">
                                        <div className="min-w-0"><div className="text-[10px] text-cyan-700 font-mono mb-0.5">{item.time}</div><div className="text-gray-300 font-['Kanit'] text-sm leading-snug break-words">{item.text}</div></div>
                                        <button onClick={(e) => {e.stopPropagation(); copyText(item.text);}} className="text-gray-600 hover:text-cyan-400 p-1.5 hover:bg-white/10 rounded transition-all flex-shrink-0" title="คัดลอก"><CopyIcon /></button>
                                    </div>
                                ))}
                            </div>
                            <div className="absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-[rgba(10,15,30,0.9)] to-transparent pointer-events-none"></div>
                        </div>

                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
